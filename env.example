# 24/7 FFmpeg YouTube Radio Stream - Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# CRITICAL - YouTube Streaming
# ============================================================================
# Get your stream key from: https://studio.youtube.com/channel/UC.../livestreaming
YOUTUBE_STREAM_KEY=your-youtube-stream-key-here

# ============================================================================
# AzuraCast Integration
# ============================================================================
# Your AzuraCast installation URL (no trailing slash)
AZURACAST_URL=http://azuracast.example.com

# AzuraCast API key (Settings > API Keys)
AZURACAST_API_KEY=your-azuracast-api-key

# Audio stream URL (typically station's listen URL)
AZURACAST_AUDIO_URL=http://azuracast.example.com:8000/radio

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_USER=radio
POSTGRES_PASSWORD=change-this-secure-password
POSTGRES_DB=radio_db
POSTGRES_PORT=5432

# ============================================================================
# Service Ports
# ============================================================================
WATCHER_PORT=9000
PROMETHEUS_PORT=9090
RTMP_PORT=1935
NGINX_HTTP_PORT=8080

# ============================================================================
# Notification Webhooks
# ============================================================================
# Discord webhook URL (optional)
# Create in: Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK_URL=

# Slack webhook URL (optional)
# Create in: Slack App > Incoming Webhooks
SLACK_WEBHOOK_URL=

# ============================================================================
# FFmpeg Encoding Settings
# ============================================================================
# Video resolution (width:height)
VIDEO_RESOLUTION=1280:720

# Video bitrate
VIDEO_BITRATE=3000k

# Audio bitrate
AUDIO_BITRATE=192k

# Encoder: libx264 (CPU) or h264_nvenc (NVIDIA GPU)
VIDEO_ENCODER=libx264

# Preset: ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow
FFMPEG_PRESET=veryfast

# Fade transition duration (seconds)
FADE_DURATION=1.0

# ============================================================================
# Video Asset Paths
# ============================================================================
# Path to video loop files
LOOPS_PATH=/srv/loops

# Default loop for unmapped tracks
DEFAULT_LOOP=/srv/loops/default.mp4

# ============================================================================
# Security
# ============================================================================
# Webhook secret for AzuraCast (validates incoming webhooks)
WEBHOOK_SECRET=generate-a-random-secret-string

# API token for manual control endpoints
API_TOKEN=generate-another-random-token

# ============================================================================
# Logging
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_PATH=/var/log/radio

# ============================================================================
# Monitoring & Health Checks
# ============================================================================
# Enable Prometheus metrics export
ENABLE_METRICS=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=30

# Auto-recovery settings
MAX_RESTART_ATTEMPTS=3
RESTART_COOLDOWN_SECONDS=60

# ============================================================================
# Advanced Settings (Optional)
# ============================================================================
# Environment: development, testing, production
ENVIRONMENT=production

# Enable debug mode (verbose logging)
DEBUG=false

# FFmpeg log level: quiet, panic, fatal, error, warning, info, verbose, debug
FFMPEG_LOG_LEVEL=info

# Track change overlap duration (seconds)
TRACK_OVERLAP_DURATION=2.0

# Enable HLS output for local monitoring
ENABLE_HLS=false

# ============================================================================
# Rate Limiting
# ============================================================================
# Max webhook requests per minute
WEBHOOK_RATE_LIMIT=10

# Max notification messages per hour
NOTIFICATION_RATE_LIMIT=60

# ============================================================================
# Database Connection Pool
# ============================================================================
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ============================================================================
# NOTES
# ============================================================================
# 1. Never commit the .env file to version control
# 2. Use strong, random passwords for production
# 3. Keep your YouTube stream key secret
# 4. Restart services after changing .env: docker-compose restart
# 5. Validate configuration: docker-compose config




